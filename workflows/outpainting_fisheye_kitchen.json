{"id":"c53fb881-ab87-4cdb-bc56-886026913c03","revision":0,"last_node_id":81,"last_link_id":180,"nodes":[{"id":34,"type":"MarkdownNote","pos":[-5.9029459953308105,347.50421142578125],"size":[336,128],"flags":{},"order":0,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["### Learn more about this workflow\n\n> [Outpaint - ComfyUI_examples](https://comfyanonymous.github.io/ComfyUI_examples/inpaint/#outpainting) — Overview\n> \n> [Outpainting - docs.comfy.org](https://docs.comfy.org/tutorials/basic/outpaint) — Explanation of concepts and step-by-step tutorial"],"color":"#432","bgcolor":"#653"},{"id":8,"type":"VAEDecode","pos":[1422,387],"size":[210,46],"flags":{},"order":13,"mode":0,"inputs":[{"localized_name":"samples","name":"samples","type":"LATENT","link":42},{"localized_name":"vae","name":"vae","type":"VAE","link":83}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[109]}],"properties":{"Node name for S&R":"VAEDecode","cnr_id":"comfy-core","ver":"0.3.18"},"widgets_values":[]},{"id":3,"type":"KSampler","pos":[1054.2236328125,140.3119354248047],"size":[315,474],"flags":{},"order":12,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":80},{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":4},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":6},{"localized_name":"latent_image","name":"latent_image","type":"LATENT","link":72}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","slot_index":0,"links":[42]}],"properties":{"Node name for S&R":"KSampler","cnr_id":"comfy-core","ver":"0.3.18"},"widgets_values":[199974055434855,"randomize",50,7,"dpmpp_2m","karras",1]},{"id":61,"type":"KSampler","pos":[1144.4588623046875,1283.557373046875],"size":[315,474],"flags":{},"order":17,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":130},{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":128},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":129},{"localized_name":"latent_image","name":"latent_image","type":"LATENT","link":127}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","slot_index":0,"links":[131]}],"properties":{"Node name for S&R":"KSampler","cnr_id":"comfy-core","ver":"0.3.18"},"widgets_values":[354106061034643,"randomize",50,6,"dpmpp_2m","karras",1]},{"id":68,"type":"KSampler","pos":[1149.4588623046875,1288.557373046875],"size":[315,474],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":null},{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":null},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":null},{"localized_name":"latent_image","name":"latent_image","type":"LATENT","link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","slot_index":0,"links":[]}],"properties":{"Node name for S&R":"KSampler","cnr_id":"comfy-core","ver":"0.3.18"},"widgets_values":[527296495679793,"randomize",50,6,"dpmpp_2m","karras",1]},{"id":7,"type":"CLIPTextEncode","pos":[479.67999267578125,388.5692443847656],"size":[425.2799987792969,180.61000061035156],"flags":{},"order":8,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":82}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[6,129,147]}],"properties":{"Node name for S&R":"CLIPTextEncode","cnr_id":"comfy-core","ver":"0.3.18"},"widgets_values":["watermark, text, blurry"]},{"id":6,"type":"CLIPTextEncode","pos":[488.2215576171875,128.71795654296875],"size":[422.81243896484375,161.2169189453125],"flags":{},"order":7,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":81}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[4,128,148]}],"properties":{"Node name for S&R":"CLIPTextEncode","cnr_id":"comfy-core","ver":"0.3.18"},"widgets_values":["Anime style victorianage kitchen in the evening\n\n(soft lighting, dim background, cinematic lighting, realistic shading, gentle contrast, warm tones, high contrast), "]},{"id":62,"type":"VAEDecode","pos":[1591.851806640625,1198.0400390625],"size":[210,46],"flags":{},"order":18,"mode":0,"inputs":[{"localized_name":"samples","name":"samples","type":"LATENT","link":131},{"localized_name":"vae","name":"vae","type":"VAE","link":132}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[133]}],"properties":{"Node name for S&R":"VAEDecode","cnr_id":"comfy-core","ver":"0.3.18"},"widgets_values":[]},{"id":29,"type":"CheckpointLoaderSimple","pos":[-1000.6826171875,1484.20703125],"size":[315,98],"flags":{},"order":2,"mode":0,"inputs":[],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","slot_index":0,"links":[80,130,149]},{"localized_name":"CLIP","name":"CLIP","type":"CLIP","slot_index":1,"links":[81,82]},{"localized_name":"VAE","name":"VAE","type":"VAE","slot_index":2,"links":[83,84,126,132,145,151]}],"properties":{"Node name for S&R":"CheckpointLoaderSimple","cnr_id":"comfy-core","ver":"0.3.18","models":[{"name":"512-inpainting-ema.safetensors","url":"https://huggingface.co/stabilityai/stable-diffusion-2-inpainting/resolve/main/512-inpainting-ema.safetensors?download=true","directory":"checkpoints"}]},"widgets_values":["512-inpainting-ema.safetensors"]},{"id":69,"type":"KSampler","pos":[1210.03955078125,1893.129638671875],"size":[315,474],"flags":{},"order":22,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":149},{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":148},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":147},{"localized_name":"latent_image","name":"latent_image","type":"LATENT","link":146}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","slot_index":0,"links":[150]}],"properties":{"Node name for S&R":"KSampler","cnr_id":"comfy-core","ver":"0.3.18"},"widgets_values":[961031009411737,"randomize",50,7,"dpmpp_2m","karras",1]},{"id":78,"type":"UpscaleModelLoader","pos":[-442.667724609375,2576.87890625],"size":[315,58],"flags":{},"order":3,"mode":0,"inputs":[],"outputs":[{"localized_name":"UPSCALE_MODEL","name":"UPSCALE_MODEL","type":"UPSCALE_MODEL","slot_index":0,"links":[167]}],"properties":{"Node name for S&R":"UpscaleModelLoader","models":[{"name":"RealESRGAN_x4plus.pth","url":"https://github.com/xinntao/Real-ESRGAN/releases/download/v0.1.0/RealESRGAN_x4plus.pth","directory":"upscale_models"}]},"widgets_values":["RealESRGAN_x4plus.pth"]},{"id":71,"type":"VAEDecode","pos":[1644.8226318359375,1914.0302734375],"size":[210,46],"flags":{},"order":24,"mode":0,"inputs":[{"localized_name":"samples","name":"samples","type":"LATENT","link":150},{"localized_name":"vae","name":"vae","type":"VAE","link":151}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[152,166,168]}],"properties":{"Node name for S&R":"VAEDecode","cnr_id":"comfy-core","ver":"0.3.18"},"widgets_values":[]},{"id":77,"type":"ImageUpscaleWithModel","pos":[23.038177490234375,2511.545166015625],"size":[340.20001220703125,46],"flags":{},"order":28,"mode":0,"inputs":[{"localized_name":"upscale_model","name":"upscale_model","type":"UPSCALE_MODEL","link":167},{"localized_name":"image","name":"image","type":"IMAGE","link":166}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[169]}],"properties":{"Node name for S&R":"ImageUpscaleWithModel"},"widgets_values":[]},{"id":72,"type":"ReprojectImage","pos":[45.7196159362793,2152.0166015625],"size":[309.6759948730469,270],"flags":{},"order":25,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":168},{"localized_name":"mask","name":"mask","shape":7,"type":"MASK","link":null},{"localized_name":"transform_matrix","name":"transform_matrix","shape":7,"type":"MAT_4X4","link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":[154]}],"properties":{"Node name for S&R":"ReprojectImage"},"widgets_values":[180,180,"FISHEYE","FISHEYE",4096,4096,0,0]},{"id":51,"type":"ReprojectImage","pos":[1172.1656494140625,899.3717651367188],"size":[309.6759948730469,270],"flags":{},"order":14,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":109},{"localized_name":"mask","name":"mask","shape":7,"type":"MASK","link":159},{"localized_name":"transform_matrix","name":"transform_matrix","shape":7,"type":"MAT_4X4","link":173}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[111]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":[113]}],"properties":{"Node name for S&R":"ReprojectImage"},"widgets_values":[90,180,"PINHOLE","FISHEYE",4096,4096,true,0]},{"id":20,"type":"LoadImage","pos":[-886.3252563476562,708.1286010742188],"size":[344,346],"flags":{},"order":4,"mode":0,"inputs":[],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[90,96]},{"localized_name":"MASK","name":"MASK","type":"MASK","slot_index":1,"links":[]}],"properties":{"Node name for S&R":"LoadImage","cnr_id":"comfy-core","ver":"0.3.18"},"widgets_values":["flux_dev_example.png","image",""]},{"id":75,"type":"TransformToMatrix","pos":[-443.9122009277344,528.1783447265625],"size":[315,154],"flags":{},"order":5,"mode":0,"inputs":[],"outputs":[{"localized_name":"MAT_4X4","name":"MAT_4X4","type":"MAT_4X4","links":[159,173,174]}],"properties":{"Node name for S&R":"TransformToMatrix"},"widgets_values":[0,0,0,42,0]},{"id":42,"type":"ReprojectImage","pos":[-108.51985168457031,871.2577514648438],"size":[315,270],"flags":{},"order":9,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":96},{"localized_name":"mask","name":"mask","shape":7,"type":"MASK","link":null},{"localized_name":"transform_matrix","name":"transform_matrix","shape":7,"type":"MAT_4X4","link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[97,114]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":[106,107,115]}],"properties":{"Node name for S&R":"ReprojectImage"},"widgets_values":[90,180,"PINHOLE","FISHEYE",4096,4096,0,0]},{"id":26,"type":"VAEEncodeForInpaint","pos":[816.6767578125,850.1190185546875],"size":[226.8000030517578,98],"flags":{},"order":11,"mode":0,"inputs":[{"localized_name":"pixels","name":"pixels","type":"IMAGE","link":91},{"localized_name":"vae","name":"vae","type":"VAE","link":84},{"localized_name":"mask","name":"mask","type":"MASK","link":102}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","slot_index":0,"links":[72]}],"properties":{"Node name for S&R":"VAEEncodeForInpaint","cnr_id":"comfy-core","ver":"0.3.18"},"widgets_values":[10]},{"id":40,"type":"ReprojectImage","pos":[375.9681091308594,797.0653076171875],"size":[309.6759948730469,270],"flags":{},"order":10,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":97},{"localized_name":"mask","name":"mask","shape":7,"type":"MASK","link":107},{"localized_name":"transform_matrix","name":"transform_matrix","shape":7,"type":"MAT_4X4","link":174}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[91]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":[102]}],"properties":{"Node name for S&R":"ReprojectImage"},"widgets_values":[180,90,"FISHEYE","PINHOLE",1024,1024,false,0]},{"id":54,"type":"PorterDuffImageComposite","pos":[-135.16976928710938,1366.7108154296875],"size":[340.20001220703125,118],"flags":{},"order":15,"mode":0,"inputs":[{"localized_name":"source","name":"source","type":"IMAGE","link":111},{"localized_name":"source_alpha","name":"source_alpha","type":"MASK","link":113},{"localized_name":"destination","name":"destination","type":"IMAGE","link":114},{"localized_name":"destination_alpha","name":"destination_alpha","type":"MASK","link":115}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[137,164,176]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":[136,165,177]}],"properties":{"Node name for S&R":"PorterDuffImageComposite"},"widgets_values":["DST_OVER"]},{"id":60,"type":"VAEEncodeForInpaint","pos":[722.9596557617188,1399.6561279296875],"size":[226.8000030517578,98],"flags":{},"order":16,"mode":0,"inputs":[{"localized_name":"pixels","name":"pixels","type":"IMAGE","link":178},{"localized_name":"vae","name":"vae","type":"VAE","link":126},{"localized_name":"mask","name":"mask","type":"MASK","link":179}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","slot_index":0,"links":[127]}],"properties":{"Node name for S&R":"VAEEncodeForInpaint","cnr_id":"comfy-core","ver":"0.3.18"},"widgets_values":[10]},{"id":80,"type":"ReprojectImage","pos":[373.3086853027344,1489.7359619140625],"size":[309.6759948730469,270],"flags":{},"order":29,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":176},{"localized_name":"mask","name":"mask","shape":7,"type":"MASK","link":177},{"localized_name":"transform_matrix","name":"transform_matrix","shape":7,"type":"MAT_4X4","link":180}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[178]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":[179]}],"properties":{"Node name for S&R":"ReprojectImage"},"widgets_values":[180,90,"FISHEYE","PINHOLE",1024,1024,false,0]},{"id":63,"type":"ReprojectImage","pos":[-282.2197570800781,1835.5792236328125],"size":[309.6759948730469,270],"flags":{},"order":19,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":133},{"localized_name":"mask","name":"mask","shape":7,"type":"MASK","link":null},{"localized_name":"transform_matrix","name":"transform_matrix","shape":7,"type":"MAT_4X4","link":170}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[134]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":[135]}],"properties":{"Node name for S&R":"ReprojectImage"},"widgets_values":[90,180,"PINHOLE","FISHEYE",4096,4096,45,0]},{"id":67,"type":"ReprojectImage","pos":[549.349609375,1865.9837646484375],"size":[309.6759948730469,270],"flags":{},"order":21,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":140},{"localized_name":"mask","name":"mask","shape":7,"type":"MASK","link":171},{"localized_name":"transform_matrix","name":"transform_matrix","shape":7,"type":"MAT_4X4","link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[144]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":[143]}],"properties":{"Node name for S&R":"ReprojectImage"},"widgets_values":[180,180,"FISHEYE","FISHEYE",1024,1024,0,0]},{"id":64,"type":"PorterDuffImageComposite","pos":[83.41279602050781,1904.2197265625],"size":[340.20001220703125,118],"flags":{},"order":20,"mode":0,"inputs":[{"localized_name":"source","name":"source","type":"IMAGE","link":134},{"localized_name":"source_alpha","name":"source_alpha","type":"MASK","link":135},{"localized_name":"destination","name":"destination","type":"IMAGE","link":137},{"localized_name":"destination_alpha","name":"destination_alpha","type":"MASK","link":136}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[140,156]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":[155,171]}],"properties":{"Node name for S&R":"PorterDuffImageComposite"},"widgets_values":["DST_OVER"]},{"id":76,"type":"TransformToMatrix","pos":[-749.0090942382812,1663.26953125],"size":[315,154],"flags":{},"order":6,"mode":0,"inputs":[],"outputs":[{"localized_name":"MAT_4X4","name":"MAT_4X4","type":"MAT_4X4","links":[170,180]}],"properties":{"Node name for S&R":"TransformToMatrix"},"widgets_values":[0,0,0,-42,0]},{"id":70,"type":"VAEEncodeForInpaint","pos":[903.9135131835938,1962.0982666015625],"size":[226.8000030517578,98],"flags":{},"order":23,"mode":0,"inputs":[{"localized_name":"pixels","name":"pixels","type":"IMAGE","link":144},{"localized_name":"vae","name":"vae","type":"VAE","link":145},{"localized_name":"mask","name":"mask","type":"MASK","link":143}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","slot_index":0,"links":[146]}],"properties":{"Node name for S&R":"VAEEncodeForInpaint","cnr_id":"comfy-core","ver":"0.3.18"},"widgets_values":[30]},{"id":73,"type":"PorterDuffImageComposite","pos":[470.6359558105469,2228.884033203125],"size":[340.20001220703125,118],"flags":{},"order":26,"mode":0,"inputs":[{"localized_name":"source","name":"source","type":"IMAGE","link":169},{"localized_name":"source_alpha","name":"source_alpha","type":"MASK","link":154},{"localized_name":"destination","name":"destination","type":"IMAGE","link":156},{"localized_name":"destination_alpha","name":"destination_alpha","type":"MASK","link":155}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[157]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":[]}],"properties":{"Node name for S&R":"PorterDuffImageComposite"},"widgets_values":["DST_OVER"]},{"id":74,"type":"SaveImage","pos":[861.8614501953125,2305.8662109375],"size":[315,270],"flags":{},"order":27,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":157}],"outputs":[],"properties":{},"widgets_values":["ComfyUI",""]}],"links":[[4,6,0,3,1,"CONDITIONING"],[6,7,0,3,2,"CONDITIONING"],[42,3,0,8,0,"LATENT"],[72,26,0,3,3,"LATENT"],[80,29,0,3,0,"MODEL"],[81,29,1,6,0,"CLIP"],[82,29,1,7,0,"CLIP"],[83,29,2,8,1,"VAE"],[84,29,2,26,1,"VAE"],[91,40,0,26,0,"IMAGE"],[96,20,0,42,0,"IMAGE"],[97,42,0,40,0,"IMAGE"],[102,40,1,26,2,"MASK"],[107,42,1,40,1,"MASK"],[109,8,0,51,0,"IMAGE"],[111,51,0,54,0,"IMAGE"],[113,51,1,54,1,"MASK"],[114,42,0,54,2,"IMAGE"],[115,42,1,54,3,"MASK"],[126,29,2,60,1,"VAE"],[127,60,0,61,3,"LATENT"],[128,6,0,61,1,"CONDITIONING"],[129,7,0,61,2,"CONDITIONING"],[130,29,0,61,0,"MODEL"],[131,61,0,62,0,"LATENT"],[132,29,2,62,1,"VAE"],[133,62,0,63,0,"IMAGE"],[134,63,0,64,0,"IMAGE"],[135,63,1,64,1,"MASK"],[136,54,1,64,3,"MASK"],[137,54,0,64,2,"IMAGE"],[140,64,0,67,0,"IMAGE"],[143,67,1,70,2,"MASK"],[144,67,0,70,0,"IMAGE"],[145,29,2,70,1,"VAE"],[146,70,0,69,3,"LATENT"],[147,7,0,69,2,"CONDITIONING"],[148,6,0,69,1,"CONDITIONING"],[149,29,0,69,0,"MODEL"],[150,69,0,71,0,"LATENT"],[151,29,2,71,1,"VAE"],[154,72,1,73,1,"MASK"],[155,64,1,73,3,"MASK"],[156,64,0,73,2,"IMAGE"],[157,73,0,74,0,"IMAGE"],[166,71,0,77,1,"IMAGE"],[167,78,0,77,0,"UPSCALE_MODEL"],[168,71,0,72,0,"IMAGE"],[169,77,0,73,0,"IMAGE"],[170,76,0,63,2,"MAT_4X4"],[171,64,1,67,1,"MASK"],[173,75,0,51,2,"MAT_4X4"],[174,75,0,40,2,"MAT_4X4"],[176,54,0,80,0,"IMAGE"],[177,54,1,80,1,"MASK"],[178,80,0,60,0,"IMAGE"],[179,80,1,60,2,"MASK"],[180,76,0,80,2,"MAT_4X4"]],"groups":[{"id":1,"title":"Load image and pad for outpainting","bounding":[318.0587463378906,623.42578125,774.2770385742188,483.0927734375],"color":"#3f789e","font_size":24,"flags":{}},{"id":2,"title":"Load image and pad for outpainting","bounding":[319.18560791015625,1299.882568359375,774.2770385742188,483.0927734375],"color":"#3f789e","font_size":24,"flags":{}}],"config":{},"extra":{"ds":{"scale":1,"offset":[-429.1361990846284,-2243.2976092303707]}},"version":0.4}